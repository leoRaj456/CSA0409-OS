#include <stdio.h>
#include <string.h>
#include <stdlib.h>

struct file {
    char name[20];
};

struct dir {
    char name[20];
    struct file f[10];
    int fcount;
} d[10];

int dcount = 0;

int main() {
    int ch, i, j;
    char dname[20], fname[20];
    
    while (1) {
        printf("\n1.Create Dir 2.Create File 3.Display 4.Search 5.Exit\nEnter choice: ");
        scanf("%d", &ch);
        switch (ch) {
        case 1:
            printf("Enter dir name: ");
            scanf("%s", d[dcount].name);
            d[dcount].fcount = 0;
            dcount++;
            break;
        case 2:
            printf("Enter dir name: ");
            scanf("%s", dname);
            for (i = 0; i < dcount; i++)
                if (strcmp(dname, d[i].name) == 0) {
                    printf("Enter file name: ");
                    scanf("%s", d[i].f[d[i].fcount].name);
                    d[i].fcount++;
                    break;
                }
            if (i == dcount) printf("Dir not found!\n");
            break;
        case 3:
            for (i = 0; i < dcount; i++) {
                printf("\nDir: %s\n", d[i].name);
                for (j = 0; j < d[i].fcount; j++)
                    printf("  %s\n", d[i].f[j].name);
            }
            break;
        case 4:
            printf("Enter dir name: ");
            scanf("%s", dname);
            printf("Enter file name: ");
            scanf("%s", fname);
            for (i = 0; i < dcount; i++)
                if (strcmp(dname, d[i].name) == 0)
                    for (j = 0; j < d[i].fcount; j++)
                        if (strcmp(fname, d[i].f[j].name) == 0)
                            printf("File found in %s\n", dname);
            break;
        case 5:
            exit(0);
        default:
            printf("Invalid choice!\n");
        }
    }
}
